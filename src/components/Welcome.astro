---
import Galeria from "./Galeria.astro"

const images = [
  // Ruta directa a public/assets/ (sin la palabra 'public')
  { src: '/assets/1.png', gifName: '1.gif', alt: 'Imagen 1' },
  { src: '/assets/2.png', gifName: '2.gif', alt: 'Imagen 2' },
  { src: '/assets/3.png', gifName: '3.gif', alt: 'Imagen 3' },
];

---
<div>
<header>
	<h1>HERMES<span> (<b>Gabriel Castaño</b>)</span></h1>
	<nav>
		<ul>
			<li><span class="disabled">Books</span></li>
			<li><span class="disabled">Eventos</span></li>
			<li><span>Institucional</span></li>
		</ul>
	</nav>
</header>

<section class="container">
	<p>Maschwitz Mall</p>
  <div class="image-container">
    {images.map((img) => {
      return (
        <div class="img-card-container" data-gif={`/assets/${img.gifName}`}>
          <img src={img.src} alt={img.alt} loading="lazy" />
        </div>
      );
    })}
  </div>
</section>

<Galeria />

</div>

<style>
	header{
		display: flex;
		height: max-content;
		flex-direction: row;
		z-index: 0;
	}
	h1{
		cursor:help;
		line-height: 1;
		margin-left:5%;
		color:#ea0e3a;
		user-select: none;
		font-family:'Akira';
		align-self: center;
		font-size: clamp(3.125rem, 1.4423rem + 8.9744vw, 7.5rem);

		animation: introHermes 2.5s cubic-bezier(0.77, 0, 0.175, 1) forwards;
  		will-change: transform, top, left; /* Optimiza el movimiento */
	}
	h1 span{
		font-size:12px;
		margin-left:15px;
		margin-right:10px;
		font-family:'PlayFair';
		color: transparent;
		position: relative;
		z-index:0;
  		transition: color 0.4s ease;
	}
	h1 span b{
		font-weight: 300;
	}
	h1 span::before {
	content: "";
	position: absolute;
	top:1%;
	left: 15px;
	color: black; 
	pointer-events: none;
	}
	h1:hover span {
	color: black;
	}
	h1:hover span::before {
	opacity: 0; 
	}
	nav{
		height: max-content;
	}
	ul{
		padding: 0;
		user-select: none;
	}
	ul li{
		display: flex;
		line-height: 1;
		list-style: none;
		align-items: center;
		font-family:PlayFair;
		border-top: 1px solid black;
		font-size: clamp(1.125rem, 0.3558rem + 4.1026vw, 3.125rem);
	}
	li:last-child {
	border-bottom: 1px solid black;
	}
	ul li::before{
		content: "*";             /* El asterisco */
		display: flex;
		justify-content: center;
		align-items: center;
		text-decoration:none;

		margin-right: 8px;
		margin-top:8px;
		width: 24px;              /* Tamaño del círculo */
		height: 18px;
		
		color: #000;              /* Color del asterisco */
		border:.5px solid #000;
		border-radius: 95%;       /* Esto hace que sea un círculo perfecto */
		
		font-size: 30px;          /* Tamaño del asterisco */
		line-height: 1;           /* Ajuste para centrar el asterisco */
		padding-top: 6px;         /* Ajuste visual (el asterisco suele estar alto) */
	}
	ul li:hover span{
		cursor:pointer;
		text-decoration:line-through;
	}
	.disabled{
		color: none;
		opacity: 0.4;           
		user-select: none;
		pointer-events: none; 
		text-decoration: none;
		cursor: not-allowed !important;
	}
	.disabled, 
	.disabled * {
		cursor: none !important;
		pointer-events: none !important;
		text-decoration: none !important;
	}
   	.container{
	   display: flex;
	   margin-top:40px;
	   margin-bottom:40px;
	   max-height: 60dvh;
	   flex-direction:column;
	}
	.container p{
		margin:0;
		padding:0;
		opacity: 0;
		font-size:18px;
		margin-left:20px;
		user-select: none;
		width: max-content;
		height: max-content;
		font-family: 'PlayFair';
	}
	.container:hover > p{
		opacity:1;
	}
	.image-container{
		display: flex;
		flex-direction:row;
		height: max-content;
		width: 100%;
		flex-wrap: wrap;
	}
	.img-card-container {
		flex: 1 1 400px; 
		max-width: 100%;
		cursor: pointer;
		position: relative;
		background-size: cover;
		background-position: center;
		background-repeat: no-repeat;
		overflow: hidden;
		aspect-ratio: 16 / 9;
	}
	.img-card-container img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		transition: opacity 0.3s ease;
		display: block;
		position: relative;
		z-index: 2;
	}
	.img-card-container img:hover{
		transform: scale(1.8);
	}
	.img-card-container:hover img {
		opacity: 0;
	}
	.img-card-container:not(:hover) img {
		opacity: .3;
		filter: blur(0px);
	}
	.img-card-container:nth-child(2n){
		transform: translateY(20px);
	}
	@media screen and (max-width: 1166px) {
		
	header{
		display: flex;
		flex-direction: column;
	}
	h1{
		margin-left:1%;
		animation:none;
	}
	h1 span{
		display: none;
	}
	nav{
		margin:20px;
		animation:none;
	}
	nav ul li{
		margin-left: 10%;
	}
	nav ul li::before{
		margin-right: 10px;
	}
	ul li:hover{
		cursor:pointer;
		text-decoration:none;
	}
	.container{
		display: none;
	}
	}
</style>

<script>
  // 1. Casting para solucionar el error de 'style'
  const cards = document.querySelectorAll('.img-card-container') as NodeListOf<HTMLElement>;

  cards.forEach(card => {
    const gifUrl = card.dataset.gif;

    card.addEventListener('mouseenter', () => {
      if (gifUrl) {
        // 2. Aplicamos el fondo con el reset de animación
        card.style.backgroundImage = `url('${gifUrl}?v=${Date.now()}')`;
      }
    });

    card.addEventListener('mouseleave', () => {
      card.style.backgroundImage = 'none';
    });
  });
</script>